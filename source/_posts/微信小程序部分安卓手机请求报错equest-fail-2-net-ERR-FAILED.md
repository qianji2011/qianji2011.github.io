---
title: '微信小程序部分安卓手机请求报错equest:fail -2:net::ERR_FAILED'
date: 2022-04-25 14:43:52
tags: 微信小程序
categories: 技术
---

## 现象

项目上线之后，很多用户都反馈小程序使用不了，最明显的表现是，用户去操作任何业务都有问题。

## 排查
### 后端查询日志定位
  后端查看各个服务的日志，均没有看到异常报错。没有看到有价值的日志
### 根据用户截图推断
  用户一进入小程序就报错，进行业务操作的时候，很多必需的字段都没有显示。
  这些字段都是依赖获取token接口。所以推断是获取token接口报错了
### 模拟机复现
  应用腾讯云提供的模拟机，找比较老的安卓机进行测试，发现这个是必现的问题。使用开发者账号登录，打开调试，发现所有的接口都报错：equest:fail -2:net::ERR_FAILED

原来真凶是这个报错： equest:fail -2:net::ERR_FAILED

## 解决方案
既然发现了真凶，那就开始寻找解决办法吧！
- 服务器的SSL证书是使用中间证书颁发的，而上线小程序请求后端的域名是测试环境的域名，中间证书是免费的，导致有些手机使用小程序的时候请求不到接口，操作不了业务。
- 运维同事补全证书